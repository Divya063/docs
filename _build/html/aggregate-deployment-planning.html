

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Planning Your Aggregate Deployment &mdash; Open Data Kit Docs</title>
  

  
  
    <link rel="shortcut icon" href="_static/odk-favicon.ico"/>
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />
  

  
        <link rel="index" title="索引"
              href="genindex.html"/>
        <link rel="search" title="検索" href="search.html"/>
    <link rel="top" title="Open Data Kit Docs" href="index.html"/>
        <link rel="up" title="Setting Up ODK Aggregate" href="aggregate-setup.html"/>
        <link rel="next" title="Installing Aggregate" href="aggregate-install.html"/>
        <link rel="prev" title="Setting Up ODK Aggregate" href="aggregate-setup.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html">
          

          
            
            <img src="_static/odk-logo-wide.png" class="logo" />
          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="getting-started.html">Getting Started Guide</a></li>
</ul>
<p class="caption"><span class="caption-text">Collect</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="collect-intro.html">ODK Collect</a></li>
<li class="toctree-l1"><a class="reference internal" href="collect-setup.html">Setting Up ODK Collect</a></li>
<li class="toctree-l1"><a class="reference internal" href="collect-using.html">Using ODK Collect</a></li>
<li class="toctree-l1"><a class="reference internal" href="collect-best-practices.html">Tips and Best Practices</a></li>
</ul>
<p class="caption"><span class="caption-text">Aggregate</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="aggregate-intro.html">ODK Aggregate</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="aggregate-setup.html">Setting Up ODK Aggregate</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Planning Your Aggregate Deployment</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#considerations">Considerations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#internet-access">Internet access</a></li>
<li class="toctree-l4"><a class="reference internal" href="#computer-skills">Computer skills</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ongoing-support">Ongoing support</a></li>
<li class="toctree-l4"><a class="reference internal" href="#availability">Availability</a></li>
<li class="toctree-l4"><a class="reference internal" href="#dataset-size">Dataset size</a></li>
<li class="toctree-l4"><a class="reference internal" href="#data-locality-and-security">Data locality and security</a></li>
<li class="toctree-l4"><a class="reference internal" href="#billing">Billing</a></li>
<li class="toctree-l4"><a class="reference internal" href="#open-source">Open source</a></li>
<li class="toctree-l4"><a class="reference internal" href="#app-engine-is-usually-sufficient">App Engine is usually sufficient</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#minimizing-app-engine-fees">Minimizing App Engine fees</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="aggregate-install.html">Installing Aggregate</a></li>
<li class="toctree-l2"><a class="reference internal" href="aggregate-upgrade.html">Upgrading Aggregate</a></li>
<li class="toctree-l2"><a class="reference internal" href="aggregate-backup.html">Backing Up Aggregate</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="aggregate-use.html">Using ODK Aggregate</a></li>
<li class="toctree-l1"><a class="reference internal" href="aggregate-best-practices.html">Tips and Best Practices</a></li>
</ul>
<p class="caption"><span class="caption-text">Briefcase</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="briefcase-guide.html">ODK Briefcase</a></li>
<li class="toctree-l1"><a class="reference internal" href="briefcase-install.html">Briefcase Installation and Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="briefcase-forms.html">Briefcase Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="briefcase-vs-aggregate.html">Briefcase vs Aggregate</a></li>
</ul>
<p class="caption"><span class="caption-text">Form Building</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="form-design-intro.html">Intro to Forms in ODK</a></li>
<li class="toctree-l1"><a class="reference internal" href="odk-build.html">ODK Build</a></li>
<li class="toctree-l1"><a class="reference internal" href="xlsform.html">XLSForm</a></li>
<li class="toctree-l1"><a class="reference internal" href="form-widgets.html">Form Widgets</a></li>
<li class="toctree-l1"><a class="reference internal" href="form-interaction.html">Interaction of constraints, relevants and read only</a></li>
<li class="toctree-l1"><a class="reference internal" href="form-update.html">Updating forms</a></li>
<li class="toctree-l1"><a class="reference internal" href="pyxform.html">pyxform</a></li>
<li class="toctree-l1"><a class="reference internal" href="validate.html">ODK Form Validate</a></li>
<li class="toctree-l1"><a class="reference internal" href="launch-apps-from-collect.html">Launching External Apps from Collect Forms</a></li>
</ul>
<p class="caption"><span class="caption-text">Contributing</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing to ODK Docs</a></li>
</ul>
<p class="caption"><span class="caption-text">Developing with ODK</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="openrosa.html">OpenRosa</a></li>
<li class="toctree-l1"><a class="reference internal" href="javarosa.html">ODK JavaRosa</a></li>
<li class="toctree-l1"><a class="reference internal" href="launch-collect-from-app.html">Launching ODK Collect from External Apps</a></li>
<li class="toctree-l1"><a class="reference internal" href="briefcase-api.html">Briefcase Aggregate API</a></li>
</ul>
<p class="caption"><span class="caption-text">Integration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="encrypted-forms.html">Encrypted Forms</a></li>
</ul>
<p class="caption"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="security-privacy.html">Security and Privacy</a></li>
<li class="toctree-l1"><a class="reference internal" href="verify-downloads.html">Verifying Downloads</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Open Data Kit</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="aggregate-setup.html">Setting Up ODK Aggregate</a> &raquo;</li>
        
      <li>Planning Your Aggregate Deployment</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/aggregate-deployment-planning.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="planning-your-aggregate-deployment">
<h1>Planning Your Aggregate Deployment<a class="headerlink" href="#planning-your-aggregate-deployment" title="このヘッドラインへのパーマリンク">¶</a></h1>
<p>ODK Aggregate can be deployed to <a class="reference internal" href="aggregate-app-engine.html"><span class="doc">Google App Engine</span></a>, <a class="reference internal" href="aggregate-aws.html"><span class="doc">Amazon’s EC2 cloud services</span></a>, or to <a class="reference internal" href="aggregate-tomcat.html"><span class="doc">webservers running Tomcat with MySQL or PostgreSQL</span></a>. There is also a fully set-up <a class="reference internal" href="aggregate-vm.html"><span class="doc">virtual machine</span></a> that can be run in nearly any environment.</p>
<p>We recommend using Google App Engine or the ODK Aggregate VM before attempting an EC2 or Tomcat deployment.</p>
<p>Once you have tried ODK Aggregate together with <a class="reference internal" href="collect-intro.html"><span class="doc">ODK Collect</span></a> and familiarized yourself with their use, you can consider alternative hosting platforms. You can also think about foregoing Aggregate altogether and just using <a class="reference internal" href="briefcase-guide.html"><span class="doc">ODK Briefcase</span></a>.</p>
<p>This document provides general advise for thinking through your deployment decisions.</p>
<div class="section" id="considerations">
<h2>Considerations<a class="headerlink" href="#considerations" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>Here are some issues to consider when determining whether Google’s App Engine cloud services are appropriate for your deployment:</p>
<div class="section" id="internet-access">
<h3>Internet access<a class="headerlink" href="#internet-access" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>Google App Engine and Amazon Web Servives both require internet access. If you don’t have consistent internet access, ODK Briefcase may be more appropriate.</p>
<p>Tomcat deployments can operate without internet access. In such an environment, ODK Collect would only be able to upload finalized forms after it connects to the network containing the Tomcat deployment.</p>
</div>
<div class="section" id="computer-skills">
<h3>Computer skills<a class="headerlink" href="#computer-skills" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>Tomcat deployments have a steep learning curve and require technical aptitude. At a minimum you will be:</p>
<ul class="simple">
<li>changing network configuration</li>
<li>selecting and using a website hosting service or specifying and configuring your own server and network router(s)</li>
<li>installing software</li>
<li>ensuring that your site has proper power-failure and data-backup systems in place</li>
</ul>
<p>If this level of systems administration skill is not available, you will probably have more success using Google App Engine.</p>
</div>
<div class="section" id="ongoing-support">
<h3>Ongoing support<a class="headerlink" href="#ongoing-support" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>Tomcat deployments require periodic backups of your data. If data security is a concern, you should have a sysadmin or dbadmin periodically review logs and look for malicious activity.</p>
</div>
<div class="section" id="availability">
<h3>Availability<a class="headerlink" href="#availability" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>Most users provision ODK Collect with blank forms and rarely update those forms over the course of a study. Surveyors upload finalized forms to ODK Aggregate infrequently and opportunistically.</p>
<p>If that is your situation, you likely do not need as high-availability a server as Google App Engine provides. Google App Engine cloud services provides highly available servers and data storage. Tomcat deployments with similar availability will be expensive to operate unless your organization already has its own information technology department. The less downtime you can tolerate, the more expensive a Tomcat deployment will be.</p>
</div>
<div class="section" id="dataset-size">
<h3>Dataset size<a class="headerlink" href="#dataset-size" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>Google App Engine can store a virtually unlimited amount of data (well in excess of 1 million submissions).</p>
<p>However, for both Google App Engine and Apache Tomcat deployments with large datasets (over 7,000 submissions), the 「Export to CSV file」, 「Export to KML file」, and 「Export to JSON file」 functions will cease to operate unless you perform a custom deployment to increase the size of the server on which the background processes run. (That is, you will need to use a larger virtual machine).</p>
<p>On Google App Engine, this larger server will incur higher billing costs. Additionally, for very large datasets (over 100,000 records), it is highly likely that performance will be better when using MySQL or PostgreSQL, and it is certainly true that you have more optimization opportunities when running your own database servers than are available through Google’s cloud services.</p>
</div>
<div class="section" id="data-locality-and-security">
<h3>Data locality and security<a class="headerlink" href="#data-locality-and-security" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>Google App Engine servers may be located anywhere in the world.</p>
<p>Depending on the sensitivity of the data and specific storage rule, regulations, or restrictions of your country or organization, the server infrastructure may not have all necessary locality guarantees or security precautions.</p>
<p>In some circumstances, you might be able to use <a class="reference internal" href="encrypted-forms.html#id1"><span class="std std-ref">Overview</span></a> to achieve compliance. You should research and comply with applicable laws and regulations before storing data on Google App Engine.</p>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">See the Google App Engine <a class="reference external" href="https://cloud.google.com/terms/">Terms of Service</a>.</p>
</div>
</div>
<div class="section" id="billing">
<h3>Billing<a class="headerlink" href="#billing" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>Google App Engine has 24-hour activity quotas that typically enable free use of ODK Aggregate during evaluation and small pilot studies.</p>
<p>You may be able to run a full study within these activity thresholds provided you:</p>
<ul class="simple">
<li>collect fewer than 2000 responses</li>
<li>access the site only during the work day</li>
<li>can be flexible about when you upload and access data</li>
</ul>
<p>Otherwise, you will need to set up a billing account with Google.</p>
</div>
<div class="section" id="open-source">
<h3>Open source<a class="headerlink" href="#open-source" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>The ODK software is open source and available for use without charge. It is important to recognize that the open source software model does place additional responsibilities on the users of that software.</p>
<p>Unless you pay for assistance when technical support is needed, you will be required to take the initiative to research and find answers, and to perform technical support tasks yourself.</p>
<p>And, unless you contribute back to the open source community through your involvement in the user groups and through contributions to the project, this software will become irrelevant and obsolete.</p>
</div>
<div class="section" id="app-engine-is-usually-sufficient">
<h3>App Engine is usually sufficient<a class="headerlink" href="#app-engine-is-usually-sufficient" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>For most users, Google App Engine will be the easiest and most cost-effective option. The <a class="reference external" href="http://opendatakit.appspot.com">http://opendatakit.appspot.com</a> site, which is lightly used, typically costs just over the minimum charge of $2.10/week unless there are a lot of users that have set up publishing actions (we purge these periodically).</p>
<p>A 6000 hour study in Mumbai that ran from 01 September 2011 through 29 February 2012 also incurred the minimum charge of $2.10/week for mid-November onward (Google did not begin billing until mid November 2011). Keep in mind that you can enable billing on an as-needed weekly basis. You will incur no charges at all if you disable billing (for example, between data gathering campaigns, while you are developing the forms for the next campaign). When disabled, access is restricted to the free daily usage limit.</p>
</div>
</div>
<div class="section" id="minimizing-app-engine-fees">
<h2>Minimizing App Engine fees<a class="headerlink" href="#minimizing-app-engine-fees" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>On App Engine, the primary consumption is Datastore Reads.</p>
<p>To minimize App Engine usage fees, users should restrict access to the ODK Aggregate website and <strong>not keep browser windows open on the submissions tab</strong>. That tab is refreshed every 6 seconds if the user is actively doing work, or slightly less frequently if they are not. At the default display of 100 submissions (a minimum of 100 Reads), that can quickly add up.</p>
<p>Keep in mind that every select-one or select-multiple question incurs an additional Read (one for each value stored). And images incur a minimum of 10 Reads. Every 200 questions in your survey costs an additional Read, and each repeat group also costs a Read for each filled-in repeat in that group.</p>
<p>For example, if your survey has 500 questions, with a repeat group containing an additional 300 questions, and the typical survey has 4 filled-in repeats, then the cost to display the Submissions tab is a minimum of 100*( (500 questions in chunks of 200 per Read = 3) + 4*(300 questions in chunks of 200 per Read = 2) ) = 100 * (3 + 4*2) ) = 100 * 11 = 1100 Reads with each refresh of the Submissions tab. At this rate, the free quota would be exceeded within 5 minutes! And this hypothetical survey did not contain any select-one or select-multiple questions, or any audio, video or image captures, all of which would require more Reads.</p>
<p>Also, it is generally more efficient to use ODK Briefcase to generate CSV files than to use ODK Aggregate, as ODK Briefcase will use the locally-cached data to generate the CSV files.</p>
<p>With larger datasets, there are two modes of operation:</p>
<blockquote>
<div><ul>
<li><p class="first">ODK Aggregate retains the full dataset.</p>
<p>In this mode, it is slightly more efficient to Pull data to your local computer then immediately Push it back up. This sets some internal tracking logic within ODK Briefcase so that the next Pull is somewhat more efficient (the Push just verifies that what you have locally matches the content on ODK Aggregate).</p>
</li>
<li><p class="first">ODK Aggregate retains only a portion of the dataset.</p>
<p>In this mode, the user periodically uses the Purge button on the Forms Management / Submissions Admin tab to remove older data collection records. In this mode, you would never Push data up to ODK Aggregate, as that would restore the purged data.</p>
</li>
</ul>
</div></blockquote>
<p>Finally, to minimizing usage, set up a data publishing to another application (for example, Fusion Tables) and do your data analysis and review there. You can export CSVs from that platform, should you wish to avoid using ODK Briefcase.</p>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="aggregate-install.html" class="btn btn-neutral float-right" title="Installing Aggregate" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="aggregate-setup.html" class="btn btn-neutral" title="Setting Up ODK Aggregate" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Open Data Kit. This document is licensed under a Creative Commons Attribution 4.0 International License.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="_static/js/custom.js"></script>
      <script type="text/javascript" src="_static/translations.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>